<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8"> {% load static %}
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="icon" type="image/png" href="{% static 'imagenes/cuygle-icon.jpg' %}" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <title>Search</title>
</head>

<body data-spy="scroll" data-target="#navbar" data-offset="57">

    <!-- Header -->
    <nav id="header" class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="{% url 'home' %}">Cuygle</a>
        </div>
    </nav>
    <!-- End Header -->

    <section class="comentarios mt-4">
        <div class="row mt-4">
            <div class="col-12 offset-lg-3 col-lg-6 ">
                <h2>Resultados</h2>
            </div>
            {% include "ajax_gpt2.html" %}
            {% for i in data %}
            <div class="col-12 offset-lg-3 col-lg-6 mt-2">
                <div class="card ">
                    <div class="card-header ">
                        <h3>{{ i.title }}</h3>
                    </div>
                    <div class="card-body ">
                        <p class="card-text ">{{ i.domain }}</p>
                        <p class="card-text ">{{ i.snippet }}</p>
                        <button  onclick="myFunction('{{ i.position }}')" class="btn btn-primary ">Similares</button>
                        <div id="{{ i.position }}" style="display: none">
                            <section class="comentarios mt-4">
                                <div class="row mt-4">
                                    <div class="col-12 offset-lg-3 col-lg-6 ">
                                        <h2>Similares</h2>
                                    </div>
                                        {% for j in similar_top %}
                                        {% if j.val == i.position %}
                                        {% for k in data %}
                                        {% if k.position == j.top_1 %}
                                        <div class="col-12 offset-lg-3 col-lg-6 mt-2">
                                            <div class="card ">
                                                <div class="card-header ">
                                                    <h4>{{ k.title }}</h4>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% endfor %}

                                        {% for k in data %}
                                        {% if k.position == j.top_2 %}
                                        <div class="col-12 offset-lg-3 col-lg-6 mt-2">
                                            <div class="card ">
                                                <div class="card-header ">
                                                    <h4>{{ k.title }}</h4>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% endfor %}

                                        {% for k in data %}
                                        {% if k.position == j.top_3 %}
                                        <div class="col-12 offset-lg-3 col-lg-6 mt-2">
                                            <div class="card ">
                                                <div class="card-header ">
                                                    <h4>{{ k.title }}</h4>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% endfor %}

                                        {% endif %}
                                        {% endfor %}
                                </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        </div>

    </section>
    <!-- Footer -->
    <footer id="footer-result" class="pb-4 pt-4 mt-4">
        <div class="container">
            <div class="row text-center">
                <div class="col-12 col-lg">
                    <a href="https://github.com/Furok-Dev">Alfredo Catucuago</a>
                </div>
                <div class="col-12 col-lg">
                    <a href="https://github.com/stalinch98">Stalin Chiguano</a>
                </div>
                <div class="col-12 col-lg">
                    <a href="https://github.com/Daniel2325">Daniel Dominguez</a>
                </div>
                <div class="col-12 col-lg">
                    <a href="#">Joel Estacio</a>
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer -->

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Option 2: jQuery, Popper.js, and Bootstrap JS
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    -->
    <script>
        function myFunction(id_div) {
            var x = document.getElementById(id_div);
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        };
    </script>


<script type="text/javascript">
    function prueba(){
        let com_body = $("#my-text-input-id").val();
        console.log(com_body);
        $.ajax({
            url: "/ajax_gpt",
            cache: false,
            data: {
            com_body: com_body,
            },
            success: function (data) {
            let html = $(data).filter("#refresh-this-div").html();
            $("#refresh-this-div").html(html);
            },
        });
    }
    </script>
    </body>
</html>